"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[590,503],{6530:(e,t,a)=>{a.d(t,{W3:()=>o,Ue:()=>i,$Z:()=>l,Vx:()=>n});var r=a(4319);function o(e){return(0,r.Z)({url:"/WebNav/category",method:"get",params:e})}function i(e){return(0,r.Z)({url:"/WebNav/category",method:"post",data:e})}function l(e){return(0,r.Z)({url:"/WebNav/category/"+e,method:"get"})}function n(e,t){return(0,r.Z)({url:"/WebNav/category/"+e,method:"put",data:t})}},5503:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var r=a(4319);var o=a(113),i=a(1203),l=a(6530);const n={props:{category_id:{type:Number,default:""}},data:function(){return{headers:{},action:"",uploadData:{},createNavigationVisible:!1,updateNavigationVisible:!1,navigation_options:[],loading:!1,tableData:[],createLoading:!1,updateLoading:!1,createError:{},updateError:{},imageUrlPreview:"",editImageUrlPreview:"",category_options:[],createNavigationForm:{name:"",url:"",category_id:"",image_path:"",description:"",published:!0,sort:0,target:"_blank"},updateNavigationForm:{id:"",name:"",url:"",category_id:"",image_path:"",description:"",target:"_blank",published:"",sort:""}}},watch:{category_id:function(){this.getNavigation()}},mounted:function(){this.setAction(),this.setHeader(),this.getCategory(),this.getNavigation()},methods:{updateNavigation:function(e){var t=this;this.updateError={},this.updateLoading=!0;var a,o,i=this.updateNavigationForm.category_id;i instanceof Array&&(this.updateNavigationForm.category_id=i.slice(-1)[0]),(a=this.updateNavigationForm.id,o=this.updateNavigationForm,(0,r.Z)({url:"/WebNav/navigation/"+a,method:"put",data:o})).then((function(a){t.$message({message:a.message,type:"success"}),t.updateNavigationVisible=!1,t.getNavigation(),t.resetCreateForm(e)})).catch((function(e){var a=e.data;422===e.code&&(t.updateError=a)})).finally((function(){t.updateLoading=!1}))},handleEdit:function(e){var t,a=this;this.updateError={},(t=e.id,(0,r.Z)({url:"/WebNav/navigation/"+t,method:"get"})).then((function(e){var t=e.data;a.updateNavigationVisible=!0,a.updateNavigationForm=t;var r;r=a.parentData([],t.category_id,a.category_options),a.updateNavigationForm.category_id=0==r.length?[0]:r,a.updateLoading=!1,a.editImageUrlPreview=(0,i.UO)()+t.image_path}))},handleRemove:function(e){var t=this;this.$confirm("确定要删除么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a;(a=e.id,(0,r.Z)({url:"/WebNav/navigation/"+a,method:"delete"})).then((function(){t.$message({type:"success",message:"删除成功!"}),t.getNavigation()})).catch((function(e){var a=e.response.data;200!==a.code&&t.$message({type:"info",message:a.message})}))})).catch((function(){t.$message({type:"info",message:"取消删除"})}))},parentData:function(e,t,a){var r=this;return a.forEach((function(a){t==a.id?0!=t&&(e.unshift(a.id),r.parentData(e,a.parent_id,r.category_options)):a.children instanceof Array&&r.parentData(e,t,a.children)})),e},setHeader:function(){this.headers={Authorization:"Bearer "+(0,o.LP)()}},setAction:function(){this.action=(0,i.Vy)()+"/WebNav/file/upload"},successUpload:function(e,t,a){this.imageUrlPreview=(0,i.UO)()+e.data.path,this.createNavigationForm.image_path=e.data.path},errorUpload:function(e,t,a){var r=e.toString();r=r.replace("Error: ",""),r=JSON.parse(r),this.createError=r.data},beforeUpload:function(e){this.uploadData.directory="/navigation",this.uploadData.name=e.name},successUploadEdit:function(e,t,a){this.editImageUrlPreview="",this.editImageUrlPreview=(0,i.UO)()+e.data.path,this.updateNavigationForm.image_path=e.data.path},errorUploadEdit:function(e,t,a){var r=e.toString();r=r.replace("Error: ",""),r=JSON.parse(r),this.updateError=r.data},beforeUploadEdit:function(e){this.uploadData.directory="/navigation",this.uploadData.name=e.name},resetCreateForm:function(e){this.$refs[e].resetFields()},createNavigation:function(e){var t=this;this.createLoading=!0,this.createError={};var a,o=this.createNavigationForm.category_id;o instanceof Array&&(this.createNavigationForm.category_id=o.slice(-1)[0]),(a=this.createNavigationForm,(0,r.Z)({url:"/WebNav/navigation",method:"post",data:a})).then((function(a){t.$message({message:a.message,type:"success"}),t.resetCreateForm(e),t.getNavigation(),t.createNavigationVisible=!1})).catch((function(e){var a=e.data;422===e.code&&(t.createError=a)})).finally((function(){t.createLoading=!1}))},getNavigation:function(){var e=this;this.loading=!0,this.createNavigationForm.category_id=this.category_id;var t,a={category_id:this.category_id};(t=a,(0,r.Z)({url:"/WebNav/navigation",method:"get",params:t})).then((function(t){var a=t.data;e.loading=!1,e.tableData=JSON.parse(JSON.stringify(a.navigation)),e.navigation_options=JSON.parse(JSON.stringify(a.navigation)),e.navigation_options.unshift({id:0,name:"顶级导航"})})).catch((function(t){e.loading=!1,e.tableData=[],e.total=0}))},getCategory:function(){var e=this;this.loading=!0;(0,l.W3)({}).then((function(t){var a=t.data;e.loading=!1,e.category_options=a.category})).catch((function(t){e.loading=!1,e.tableData=[],e.total=0}))}}};const s=(0,a(1900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.createNavigationVisible=!0}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加导航\n    ")]),e._v(" "),a("div",{staticClass:"material_list",staticStyle:{top:"50px"}},[a("el-scrollbar",[a("div",{staticClass:"scrollbar-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,"min-width":"15%",label:"名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url","show-overflow-tooltip":!0,"min-width":"15%",label:"地址",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"published","show-overflow-tooltip":!0,"min-width":"15%",label:"是否发布"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.published?a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"success",size:"small"}},[e._v("已发布\n                            ")]):a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{type:"info",size:"small"}},[e._v("未发布")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"分类","show-overflow-tooltip":!0,"min-width":"15%",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{margin:"0 3px"},attrs:{size:"small"}},[e._v("\n                                "+e._s(null!=t.row.category&&t.row.category.hasOwnProperty("name")?t.row.category.name:"无")+"\n                            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",title:"编辑"},on:{click:function(a){return e.handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("el-button",{attrs:{title:"删除",type:"text"},on:{click:function(a){return e.handleRemove(t.row)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"dialog_tc",title:"添加导航",visible:e.createNavigationVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.createNavigationVisible=t}}},[a("el-form",{ref:"createForm",attrs:{model:e.createNavigationForm,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"所属分类",prop:"category_id",error:e.createError.category_id?e.createError.category_id[0]:""}},[a("el-cascader",{attrs:{options:e.category_options,clearable:"",filterable:"",props:{checkStrictly:!0,label:"name",value:"id",expandTrigger:"click"},placeholder:"请选择所属分类"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return[a("span",[e._v(e._s(o.name))]),e._v(" "),r.isLeaf?e._e():a("span",[e._v(" ("+e._s(o.children.length)+") ")])]}}]),model:{value:e.createNavigationForm.category_id,callback:function(t){e.$set(e.createNavigationForm,"category_id",t)},expression:"createNavigationForm.category_id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"导航名称",required:"",error:e.createError.name?e.createError.name[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"请输入导航名称"},model:{value:e.createNavigationForm.name,callback:function(t){e.$set(e.createNavigationForm,"name",t)},expression:"createNavigationForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"url",label:"导航网址",error:e.createError.url?e.createError.url[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"例：www.zealov.com"},model:{value:e.createNavigationForm.url,callback:function(t){e.$set(e.createNavigationForm,"url",t)},expression:"createNavigationForm.url"}})],1),e._v(" "),a("el-form-item",{staticClass:"upload_thumb",attrs:{label:"缩略图",prop:"image_path",error:e.createError.file?e.createError.file[0]:""}},[a("el-upload",{staticClass:"uploadThumbImg",attrs:{headers:e.headers,action:e.action,"show-file-list":!1,"on-success":e.successUpload,"before-upload":e.beforeUpload,"on-error":e.errorUpload,data:e.uploadData}},[e.createNavigationForm.image_path?a("img",{staticClass:"thumb",attrs:{src:e.imageUrlPreview}}):a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"el-upload__tip"},[e._v("\n                        支持JPG/PNG格式，建议尺寸800*450px或16:9\n                        "),a("br"),e._v("图片大小不超过1MB\n                    ")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"简介",error:e.createError.description?e.createError.description[0]:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"500","show-word-limit":"",rows:3},model:{value:e.createNavigationForm.description,callback:function(t){e.$set(e.createNavigationForm,"description",t)},expression:"createNavigationForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"published",label:"状态",error:e.createError.published?e.createError.published[0]:""}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.createNavigationForm.published,callback:function(t){e.$set(e.createNavigationForm,"published",t)},expression:"createNavigationForm.published"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createNavigationVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.createLoading},on:{click:function(t){return e.createNavigation("createForm")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"custom-class":"dialog_tc",title:"修改导航",visible:e.updateNavigationVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.updateNavigationVisible=t}}},[a("el-form",{ref:"updateForm",attrs:{model:e.updateNavigationForm,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"所属分类",prop:"category_id",error:e.updateError.category_id?e.updateError.category_id[0]:""}},[a("el-cascader",{attrs:{options:e.category_options,clearable:"",filterable:"",props:{checkStrictly:!0,label:"name",value:"id",expandTrigger:"click"},placeholder:"请选择所属分类"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return[a("span",[e._v(e._s(o.name))]),e._v(" "),r.isLeaf?e._e():a("span",[e._v(" ("+e._s(o.children.length)+") ")])]}}]),model:{value:e.updateNavigationForm.category_id,callback:function(t){e.$set(e.updateNavigationForm,"category_id",t)},expression:"updateNavigationForm.category_id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"导航名称",required:"",error:e.updateError.name?e.updateError.name[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"请输入导航名称"},model:{value:e.updateNavigationForm.name,callback:function(t){e.$set(e.updateNavigationForm,"name",t)},expression:"updateNavigationForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"url",label:"导航地址",error:e.updateError.url?e.updateError.url[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"请输入导航地址"},model:{value:e.updateNavigationForm.url,callback:function(t){e.$set(e.updateNavigationForm,"url",t)},expression:"updateNavigationForm.url"}})],1),e._v(" "),a("el-form-item",{staticClass:"upload_thumb",attrs:{label:"缩略图",prop:"image_path",error:e.updateError.file?e.updateError.file[0]:""}},[a("el-upload",{staticClass:"uploadThumbImg",attrs:{headers:e.headers,action:e.action,"show-file-list":!1,"on-success":e.successUploadEdit,"before-upload":e.beforeUploadEdit,"on-error":e.errorUploadEdit,data:e.uploadData}},[e.updateNavigationForm.image_path?a("img",{staticClass:"thumb",attrs:{src:e.editImageUrlPreview}}):a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"el-upload__tip"},[e._v("\n                        支持JPG/PNG格式，建议尺寸800*450px或16:9\n                        "),a("br"),e._v("图片大小不超过1MB\n                    ")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"简介",error:e.updateError.description?e.updateError.description[0]:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"500","show-word-limit":"",rows:3},model:{value:e.updateNavigationForm.description,callback:function(t){e.$set(e.updateNavigationForm,"description",t)},expression:"updateNavigationForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"target",label:"打开方式",error:e.updateError.target?e.updateError.target[0]:""}},[a("el-radio",{attrs:{label:"_self"},model:{value:e.updateNavigationForm.target,callback:function(t){e.$set(e.updateNavigationForm,"target",t)},expression:"updateNavigationForm.target"}},[e._v("当前窗口")]),e._v(" "),a("el-radio",{attrs:{label:"_blank"},model:{value:e.updateNavigationForm.target,callback:function(t){e.$set(e.updateNavigationForm,"target",t)},expression:"updateNavigationForm.target"}},[e._v("新建窗口")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"published",label:"状态",error:e.updateError.published?e.updateError.published[0]:""}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.updateNavigationForm.published,callback:function(t){e.$set(e.updateNavigationForm,"published",t)},expression:"updateNavigationForm.published"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateNavigationVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.updateNavigation("updateForm")}}},[e._v("保存")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},6590:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(5503),o=a(6530),i=a(1203),l=a(113),n=a(5108);const s={data:function(){return{updateCategoryVisible:!1,createCategoryVisible:!1,updateError:{},updateLoading:!1,loading:!1,createLoading:!1,createError:{},uploadData:{},headers:{},imageUrlPreview:"",editImageUrlPreview:"",action:"",tableData:[],category_options:[],category_id:"",createCategoryForm:{name:"",label:"",parent_id:[0],image_path:"",description:"",published:!0,sort:0},updateCategoryForm:{id:"",name:"",label:"",parent_id:"",image_path:"",description:"",published:"",sort:""}}},components:{NavigationTable:r.default},created:function(){this.setAction(),this.setHeader(),this.getCategory()},methods:{setCategory:function(e){this.category_id=e.id},createChildren:function(e){this.createCategoryVisible=!0;var t;t=this.parentData([],e.id,this.category_options),this.createCategoryForm.parent_id=0==t.length?[0]:t},updateCategory:function(){var e=this;this.updateError={},this.updateLoading=!0;var t=this.updateCategoryForm.parent_id;t instanceof Array&&(this.updateCategoryForm.parent_id=t.slice(-1)[0]),(0,o.Vx)(this.updateCategoryForm.id,this.updateCategoryForm).then((function(t){e.$message({message:t.message,type:"success"}),e.updateCategoryVisible=!1,e.getCategory(),e.$refs.child.getCategory()})).catch((function(t){var a=t.data;e.updateError=a})).finally((function(){e.updateLoading=!1}))},handleEdit:function(e){var t=this;this.updateError={},(0,o.$Z)(e.id).then((function(e){var a=e.data;t.updateCategoryVisible=!0,t.updateCategoryForm=a;var r;r=t.parentData([],a.parent_id,t.category_options),t.updateCategoryForm.parent_id=0==r.length?[0]:r,t.updateLoading=!1,t.editImageUrlPreview=(0,i.UO)()+a.image_path}))},parentData:function(e,t,a){var r=this;return a.forEach((function(a){t==a.id?0!=t&&(e.unshift(a.id),r.parentData(e,a.parent_id,r.category_options)):a.children instanceof Array&&r.parentData(e,t,a.children)})),e},createCategory:function(e){var t=this;this.createLoading=!0,this.createError={};var a=this.createCategoryForm.parent_id;a instanceof Array&&(this.createCategoryForm.parent_id=a.slice(-1)[0]),(0,o.Ue)(this.createCategoryForm).then((function(a){t.$message({message:a.message,type:"success"}),t.resetCreateForm(e),t.getCategory(),t.createCategoryVisible=!1,t.$refs.child.getCategory()})).catch((function(e){var a=e.data;t.createError=a})).finally((function(){t.createLoading=!1}))},getCategory:function(){var e=this;this.loading=!0;(0,o.W3)({}).then((function(t){var a=t.data;e.loading=!1,e.tableData=JSON.parse(JSON.stringify(a.category)),e.category_options=JSON.parse(JSON.stringify(a.category)),e.category_options.unshift({id:0,name:"顶级分类"}),e.tableData.unshift({name:"全部分类"})})).catch((function(t){e.loading=!1,e.tableData=[],e.total=0}))},setAction:function(){this.action=(0,i.Vy)()+"/WebNav/file/upload"},setHeader:function(){this.headers={Authorization:"Bearer "+(0,l.LP)()}},successUpload:function(e,t,a){this.imageUrlPreview=(0,i.UO)()+e.data.path,this.createCategoryForm.image_path=e.data.path},errorUpload:function(e,t,a){var r=e.toString();r=r.replace("Error: ",""),r=JSON.parse(r),this.createError=r.data},beforeUpload:function(e){this.uploadData.directory="/system_file",this.uploadData.name=e.name},successUploadEdit:function(e,t,a){this.editImageUrlPreview=(0,i.UO)()+e.data.path,n.log(this.editImageUrlPreview),this.updateCategoryForm.image_path=e.data.path,n.log(this.updateCategoryForm)},errorUploadEdit:function(e,t,a){var r=e.toString();r=r.replace("Error: ",""),r=JSON.parse(r),this.updateError=r.data},beforeUploadEdit:function(e){this.uploadData.directory="/system_file",this.uploadData.name=e.name},resetCreateForm:function(e){this.$refs[e].resetFields()}}};const c=(0,a(1900).Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_container"},[a("div",{staticClass:"container material-box",staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticClass:"material-content",staticStyle:{top:"20px"}},[a("div",{staticClass:"material-left"},[a("div",{staticClass:"material-group"},[a("div",{staticClass:"top",staticStyle:{"background-color":"#f0f0f0","padding-bottom":"15px"}},[a("div",{staticClass:"title",on:{click:function(t){e.category_id=""}}},[e._v("分类")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.createCategoryVisible=!0}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})])],1),e._v(" "),a("div",{staticClass:"group-tree"},[a("el-scrollbar",[a("el-tree",{attrs:{data:e.tableData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var r=t.data;return a("span",{staticClass:"custom-tree-node",on:{click:function(t){return e.setCategory(r)}}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"top-start",disabled:!0}},[a("span",{staticClass:"node-name"},[e._v(e._s(r.name))])]),e._v(" "),"全部分类"!=r.name?a("span",{staticClass:"button"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleEdit(r)}}},[a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.createChildren(r)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})])],1):e._e()],1)}}])})],1)],1)])]),e._v(" "),a("div",{staticClass:"material-right"},[a("NavigationTable",{ref:"child",attrs:{category_id:e.category_id}})],1)])]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"dialog_tc",title:"添加分类",visible:e.createCategoryVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.createCategoryVisible=t}}},[a("el-form",{ref:"createForm",attrs:{model:e.createCategoryForm,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"parent_id",error:e.createError.parent_id?e.createError.parent_id[0]:""}},[a("el-cascader",{attrs:{options:e.category_options,clearable:"",filterable:"",props:{checkStrictly:!0,label:"name",value:"id",expandTrigger:"click"},placeholder:"请选择上级分类"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return[a("span",[e._v(e._s(o.name))]),e._v(" "),r.isLeaf?e._e():a("span",[e._v(" ("+e._s(o.children.length)+") ")])]}}]),model:{value:e.createCategoryForm.parent_id,callback:function(t){e.$set(e.createCategoryForm,"parent_id",t)},expression:"createCategoryForm.parent_id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"分类名称",required:"",error:e.createError.name?e.createError.name[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"请输入分类名称"},model:{value:e.createCategoryForm.name,callback:function(t){e.$set(e.createCategoryForm,"name",t)},expression:"createCategoryForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"label",label:"分类标识",required:"",error:e.createError.label?e.createError.label[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"限英文字母,设定后不可修改"},model:{value:e.createCategoryForm.label,callback:function(t){e.$set(e.createCategoryForm,"label",t)},expression:"createCategoryForm.label"}})],1),e._v(" "),a("el-form-item",{staticClass:"upload_thumb",attrs:{label:"缩略图",prop:"thumbnail",error:e.createError.file?e.createError.file[0]:""}},[a("el-upload",{staticClass:"uploadThumbImg",attrs:{headers:e.headers,action:e.action,"show-file-list":!1,"on-success":e.successUpload,"before-upload":e.beforeUpload,"on-error":e.errorUpload,data:e.uploadData}},[e.createCategoryForm.image_path?a("img",{staticClass:"thumb",attrs:{src:e.imageUrlPreview}}):a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"el-upload__tip"},[e._v("\n                    支持JPG/PNG格式，建议尺寸800*450px或16:9\n                    "),a("br"),e._v("图片大小不超过1MB\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"简介",error:e.createError.description?e.createError.description[0]:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"500","show-word-limit":"",rows:3},model:{value:e.createCategoryForm.description,callback:function(t){e.$set(e.createCategoryForm,"description",t)},expression:"createCategoryForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"published",label:"状态",error:e.createError.published?e.createError.published[0]:""}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.createCategoryForm.published,callback:function(t){e.$set(e.createCategoryForm,"published",t)},expression:"createCategoryForm.published"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createCategoryVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.createLoading},on:{click:function(t){return e.createCategory("createForm")}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{"custom-class":"dialog_tc",title:"修改分类",visible:e.updateCategoryVisible,width:"560px","close-on-click-modal":!1},on:{"update:visible":function(t){e.updateCategoryVisible=t}}},[a("el-form",{ref:"updateForm",attrs:{model:e.updateCategoryForm,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"parent_id",error:e.updateError.parent_id?e.updateError.parent_id[0]:""}},[a("el-cascader",{attrs:{options:e.category_options,clearable:"",filterable:"",props:{checkStrictly:!0,label:"name",value:"id",expandTrigger:"click"},placeholder:"请选择上级分类"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return[a("span",[e._v(e._s(o.name))]),e._v(" "),r.isLeaf?e._e():a("span",[e._v(" ("+e._s(o.children.length)+") ")])]}}]),model:{value:e.updateCategoryForm.parent_id,callback:function(t){e.$set(e.updateCategoryForm,"parent_id",t)},expression:"updateCategoryForm.parent_id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"分类名称",required:"",error:e.updateError.name?e.updateError.name[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"请输入分类名称"},model:{value:e.updateCategoryForm.name,callback:function(t){e.$set(e.updateCategoryForm,"name",t)},expression:"updateCategoryForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"label",label:"分类标识",required:"",error:e.updateError.label?e.updateError.label[0]:""}},[a("el-input",{attrs:{type:"text",placeholder:"限英文字母,设定后不可修改"},model:{value:e.updateCategoryForm.label,callback:function(t){e.$set(e.updateCategoryForm,"label",t)},expression:"updateCategoryForm.label"}})],1),e._v(" "),a("el-form-item",{staticClass:"upload_thumb",attrs:{label:"缩略图",prop:"thumbnail",error:e.updateError.file?e.updateError.file[0]:""}},[a("el-upload",{staticClass:"uploadThumbImg",attrs:{headers:e.headers,action:e.action,"show-file-list":!1,"on-success":e.successUploadEdit,"before-upload":e.beforeUploadEdit,data:e.uploadData,"on-error":e.errorUploadEdit}},[e.updateCategoryForm.image_path?a("img",{staticClass:"thumb",attrs:{src:e.editImageUrlPreview}}):a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("div",{staticClass:"el-upload__tip"},[e._v("\n                    支持JPG/PNG格式，建议尺寸800*450px或16:9\n                    "),a("br"),e._v("图片大小不超过1MB\n                ")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"简介",error:e.updateError.description?e.updateError.description[0]:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"500","show-word-limit":"",rows:3},model:{value:e.updateCategoryForm.description,callback:function(t){e.$set(e.updateCategoryForm,"description",t)},expression:"updateCategoryForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"published",label:"状态",error:e.updateError.published?e.updateError.published[0]:""}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.updateCategoryForm.published,callback:function(t){e.$set(e.updateCategoryForm,"published",t)},expression:"updateCategoryForm.published"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateCategoryVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.updateCategory("updateForm")}}},[e._v("修改")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);